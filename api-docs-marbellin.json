{"openapi":"3.1.0","info":{"title":"marbellin E-Commerce API","description":"API REST para la platforma e-commerce marbellin","version":"1.0.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Autenticación","description":"Endpoints para autenticación de usuarios"},{"name":"Store - Catalog","description":"API pública para el catálogo de la tienda"},{"name":"Store - Catalog","description":"API pública para el catálogo de productos de la tienda"},{"name":"Admin - File Uploads","description":"Handles image and file uploads for products"},{"name":"Public - Webhooks","description":"Recepción de notificaciones de pasarelas de pago"},{"name":"Admin - Customers","description":"Endpoints de administración para gestionar clientes"},{"name":"Store - Mi Cuenta","description":"API para que los clientes gestionen su cuenta y direcciones"},{"name":"Store - Mis Pedidos","description":"API para que los clientes gestionen sus pedidos y realicen compras"},{"name":"Admin - Órdenes","description":"Gestión de órdenes del panel de administración"},{"name":"Admin - Catalog","description":"Endpoints de administración para gestionar el catálogo de productos y categorías"},{"name":"Admin - Dashboard","description":"Estadísticas y métricas del panel administrativo"},{"name":"Admin - Users","description":"Endpoints de administración para gestionar usuarios del sistema"}],"paths":{"/api/store/account/profile":{"get":{"tags":["Store - Mi Cuenta"],"summary":"Obtener mi perfil","description":"Obtiene la información del perfil del cliente autenticado.","operationId":"getMyProfile","responses":{"200":{"description":"Perfil obtenido exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CustomerDto"}}}},"404":{"description":"Cliente no encontrado"}},"security":[{"bearerAuth":[]}]},"put":{"tags":["Store - Mi Cuenta"],"summary":"Actualizar mi perfil","description":"Actualiza la información del perfil del cliente autenticado (nombres, apellidos, teléfono, documento).","operationId":"updateMyProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerProfileUpdateDto"}}},"required":true},"responses":{"200":{"description":"Perfil actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CustomerDto"}}}},"400":{"description":"Datos de entrada inválidos"},"404":{"description":"Cliente no encontrado"}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Store - Mi Cuenta"],"summary":"Crear mi perfil","description":"Crea un perfil de cliente para un usuario recién registrado que aún no tiene CustomerEntity asociado.","operationId":"createProfile","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerProfileUpdateDto"}}},"required":true},"responses":{"201":{"description":"Perfil creado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CustomerDto"}}}},"400":{"description":"Datos de entrada inválidos"},"404":{"description":"Usuario no encontrado"},"409":{"description":"El perfil ya existe"}},"security":[{"bearerAuth":[]}]}},"/api/admin/users/{id}":{"get":{"tags":["Admin - Users"],"summary":"Obtener usuario por ID","description":"Obtiene los detalles completos de un usuario específico mediante su identificador único.","operationId":"getUserById","parameters":[{"name":"id","in":"path","description":"ID único del usuario","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Usuario encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"put":{"tags":["Admin - Users"],"summary":"Actualizar usuario","description":"Permite al administrador actualizar la información de un usuario existente. Se puede modificar el email, rol y estado de activación. No incluye actualización de contraseña (usar el endpoint específico).","operationId":"updateUser","parameters":[{"name":"id","in":"path","description":"ID único del usuario a actualizar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"description":"Nuevos datos del usuario","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserUpdateDto"}}},"required":true},"responses":{"200":{"description":"Usuario actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Datos de entrada inválidos (validación fallida)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"El email ya está en uso por otro usuario","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/products/{id}":{"get":{"tags":["Admin - Catalog"],"summary":"Obtener producto por ID","description":"Obtiene los detalles completos de un producto específico mediante su identificador único, incluyendo su categoría asociada.","operationId":"findById","parameters":[{"name":"id","in":"path","description":"ID único del producto","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Producto encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductDto"}}}},"404":{"description":"Producto no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"put":{"tags":["Admin - Catalog"],"summary":"Actualizar producto y variantes (upsert)","description":"Actualiza los datos de un producto existente. Todos los campos son opcionales. El SKU no se puede modificar. Si se especifica una categoría, reemplaza la categoría actual.","operationId":"update","parameters":[{"name":"id","in":"path","description":"ID único del producto a actualizar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"description":"Nuevos datos del producto (campos opcionales)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductUpdateDto"}}},"required":true},"responses":{"200":{"description":"Producto actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductDto"}}}},"400":{"description":"Datos de entrada inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Producto no encontrado o la categoría especificada no existe","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/customers/{id}":{"get":{"tags":["Admin - Customers"],"summary":"Obtener cliente por ID","description":"Obtiene los detalles completos de un cliente específico mediante su identificador único, incluyendo todas sus direcciones registradas.","operationId":"getCustomerById","parameters":[{"name":"id","in":"path","description":"ID único del cliente","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Cliente encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CustomerDto"}}}},"404":{"description":"Cliente no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"put":{"tags":["Admin - Customers"],"summary":"Actualizar información del cliente","description":"Permite al administrador actualizar información básica del cliente como email y teléfono. Los campos son opcionales (actualización parcial).","operationId":"updateCustomer","parameters":[{"name":"id","in":"path","description":"ID único del cliente a actualizar","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"description":"Nuevos datos del cliente (campos opcionales)","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CustomerUpdateDto"}}},"required":true},"responses":{"200":{"description":"Cliente actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CustomerDto"}}}},"400":{"description":"Datos de entrada inválidos (validación fallida)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Cliente no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/categories/{id}":{"get":{"tags":["Admin - Catalog"],"summary":"Obtener categoría por ID","operationId":"findById_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Categoría encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}},"404":{"description":"Categoría no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}},"put":{"tags":["Admin - Catalog"],"summary":"Actualizar categoría","operationId":"update_1","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryUpdateDto"}}},"required":true},"responses":{"200":{"description":"Categoría actualizada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}},"404":{"description":"Categoría no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}},"409":{"description":"Conflicto de jerarquía","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}}}}},"/api/store/orders":{"post":{"tags":["Store - Mis Pedidos"],"summary":"Procesar checkout","description":"Crea un nuevo pedido procesando el carrito de compra. Valida stock de las variantes específicas (Talla/Color), descuenta inventario y calcula totales. Si el método de pago es MERCADO_PAGO, retorna un preferenceId para redirección. Si es PAGO_EFECTIVO (solo para recojo en tienda), confirma la reserva directamente. REGLA: El pago contra entrega NO está disponible para delivery a domicilio.","operationId":"processCheckout","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckoutRequestDto"}}},"required":true},"responses":{"201":{"description":"Pedido creado exitosamente. Si paymentMethod=MERCADO_PAGO, incluye preferenceId.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CheckoutResponseDto"}}}},"400":{"description":"Datos de entrada inválidos (ej: carrito vacío) o regla de negocio violada (ej: pago contra entrega con delivery a domicilio)"},"404":{"description":"Cliente, producto o dirección no encontrado"},"409":{"description":"Stock insuficiente de la variante seleccionada, dirección no pertenece al cliente, o error al crear preferencia de Mercado Pago"}},"security":[{"bearerAuth":[]}]}},"/api/store/account/addresses":{"get":{"tags":["Store - Mi Cuenta"],"summary":"Obtener mis direcciones","description":"Lista todas las direcciones de envío registradas por el cliente.","operationId":"getMyAddresses","responses":{"200":{"description":"Lista de direcciones obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AddressDto"}}}}},"security":[{"bearerAuth":[]}]},"post":{"tags":["Store - Mi Cuenta"],"summary":"Agregar nueva dirección","description":"Registra una nueva dirección de envío para el cliente autenticado.","operationId":"addAddress","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AddressCreateDto"}}},"required":true},"responses":{"200":{"description":"Dirección creada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AddressDto"}}}},"400":{"description":"Datos de dirección inválidos"}},"security":[{"bearerAuth":[]}]}},"/api/payments/webhook":{"post":{"tags":["Public - Webhooks"],"summary":"Recibir notificación de Mercado Pago","description":"Endpoint público (Webhook) que Mercado Pago llama cuando cambia el estado de un pago y valida firma de seguridad. Valida el pago con la API de MP y actualiza el estado de la orden localmente.","operationId":"receiveNotification","parameters":[{"name":"x-signature","in":"header","required":false,"schema":{"type":"string"}},{"name":"x-request-id","in":"header","required":false,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WebhookNotificationDto"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/auth/register":{"post":{"tags":["Autenticación"],"summary":"Registrar cuenta de cliente","description":"Crea una nueva cuenta para el usuario final del Ecommerce. Por defecto, asigna el rol CLIENTE y genera un token JWT para el auto-login.","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/auth/login":{"post":{"tags":["Autenticación"],"summary":"Iniciar sesión","description":"Autentica un usuario existente y genera un token JWT","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/admin/users":{"get":{"tags":["Admin - Users"],"summary":"Listar todos los usuarios","description":"Obtiene un listado paginado de todos los usuarios del sistema con su información básica y rol asignado. Los resultados se ordenan por última actualización descendente por defecto. Permite filtrar por rol (ADMIN/CLIENTE), buscar por email y filtrar solo personal administrativo (excluye clientes).","operationId":"getAllUsers","parameters":[{"name":"role","in":"query","description":"Filtrar usuarios por rol específico (ADMIN o CLIENTE)","required":false,"schema":{"type":"string","enum":["ADMIN","CLIENTE"]},"example":"ADMIN"},{"name":"search","in":"query","description":"Buscar usuarios por email (búsqueda parcial, insensible a mayúsculas/minúsculas)","required":false,"schema":{"type":"string"},"example":"admin@marbellin.com"},{"name":"staffOnly","in":"query","description":"Si es true, muestra solo personal administrativo (excluye usuarios con rol CLIENTE). Por defecto: false (muestra todos los usuarios)","required":false,"schema":{"type":"boolean","default":false},"example":true},{"name":"pageable","in":"query","description":"Parámetros de paginación y ordenamiento. Por defecto: página 0, tamaño 20, ordenado por updatedAt DESC (última actualización)","required":true,"schema":{"$ref":"#/components/schemas/Pageable"},"example":"page=0&size=10&sort=email,asc"}],"responses":{"200":{"description":"Lista de usuarios obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}},"post":{"tags":["Admin - Users"],"summary":"Crear cuenta de Staff y/o Usuario Interno","description":"Permite al administrador crear una cuenta interna del sistema, con la capacidad de asignar cualquier rol disponible (ADMIN, CLIENTE, etc.). Este es el único endpoint para crear cuentas con privilegios elevados (STAFF).","operationId":"createUser","requestBody":{"description":"Datos del usuario a crear","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserCreateDto"}}},"required":true},"responses":{"201":{"description":"Usuario creado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"400":{"description":"Datos de entrada inválidos (validación fallida)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"El email ya está registrado en el sistema","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/uploads/products":{"post":{"tags":["Admin - File Uploads"],"summary":"Upload one or more product images","operationId":"uploadProductImages","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary"}},"required":["file"]}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/admin/products":{"get":{"tags":["Admin - Catalog"],"summary":"Listar productos con filtros y paginación","description":"Obtiene un listado paginado de productos del catálogo. Permite filtrar por nombre (búsqueda parcial), SKU (búsqueda parcial), estado exacto y categoría. Los resultados se ordenan por fecha de creación descendente por defecto.","operationId":"findAll","parameters":[{"name":"search","in":"query","description":"Término de búsqueda global que filtra por nombre o SKU del producto (búsqueda parcial, insensible a mayúsculas)","required":false,"schema":{"type":"string"},"example":"laptop"},{"name":"status","in":"query","description":"Filtro por estado del producto (coincidencia exacta)","required":false,"schema":{"type":"string","enum":["ACTIVO","INACTIVO"]},"example":"ACTIVO"},{"name":"categoryId","in":"query","description":"Filtro por ID de categoría (obtiene productos de esa categoría)","required":false,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"pageable","in":"query","description":"Parámetros de paginación y ordenamiento. Por defecto: página 0, tamaño 20, ordenado por updatedAt DESC (última actualización)","required":true,"schema":{"$ref":"#/components/schemas/Pageable"},"example":"page=0&size=10&sort=name,asc"}],"responses":{"200":{"description":"Lista de productos obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}},"post":{"tags":["Admin - Catalog"],"summary":"Crear nuevo producto con variantes","description":"Permite al administrador crear un nuevo producto en el catálogo. El SKU debe ser único. Se debe asignar una categoría.","operationId":"create","requestBody":{"description":"Datos del producto a crear","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreateDto"}}},"required":true},"responses":{"201":{"description":"Producto creado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductDto"}}}},"400":{"description":"Datos de entrada inválidos (validación fallida)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"La categoría especificada no existe","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"409":{"description":"Ya existe un producto con el SKU especificado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/categories":{"get":{"tags":["Admin - Catalog"],"summary":"Listar categorías con paginación","description":"Obtiene un listado paginado de todas las categorías del catálogo. Opcionalmente se puede filtrar por categoría padre para obtener subcategorías específicas.","operationId":"findAll_1","parameters":[{"name":"parentId","in":"query","description":"ID de la categoría padre para filtrar subcategorías. Si no se especifica, devuelve todas las categorías","required":false,"schema":{"type":"integer","format":"int64"},"example":1},{"name":"pageable","in":"query","description":"Parámetros de paginación y ordenamiento. Por defecto: página 0, tamaño 20, ordenado por última actualización descendente","required":true,"schema":{"$ref":"#/components/schemas/Pageable"},"example":"page=0&size=10&sort=updatedAt,desc"}],"responses":{"200":{"description":"Lista de categorías obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}},"post":{"tags":["Admin - Catalog"],"summary":"Crear nueva categoría","operationId":"create_1","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CategoryCreateDto"}}},"required":true},"responses":{"201":{"description":"Categoría creada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}},"400":{"description":"Datos inválidos","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}},"404":{"description":"Categoría padre no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/CategoryDto"}}}}}}},"/api/store/account/password":{"patch":{"tags":["Store - Mi Cuenta"],"summary":"Cambiar contraseña","description":"Permite al cliente cambiar su contraseña de acceso.","operationId":"changePassword","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordUpdateDto"}}},"required":true},"responses":{"200":{"description":"Contraseña actualizada exitosamente"},"400":{"description":"Contraseña inválida"},"404":{"description":"Cliente no encontrado"}},"security":[{"bearerAuth":[]}]}},"/api/admin/users/{id}/toggle-status":{"patch":{"tags":["Admin - Users"],"summary":"Cambiar estado de activación del usuario","description":"Alterna el estado de activación del usuario entre activo (enabled=true) e inactivo (enabled=false). Los usuarios inactivos no pueden iniciar sesión en el sistema.","operationId":"toggleUserStatus","parameters":[{"name":"id","in":"path","description":"ID único del usuario","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"responses":{"200":{"description":"Estado del usuario cambiado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/UserDto"}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/users/{id}/password":{"patch":{"tags":["Admin - Users"],"summary":"Actualizar contraseña de usuario","description":"Permite al administrador cambiar la contraseña de un usuario. La contraseña se almacena de forma segura usando bcrypt.","operationId":"updatePassword","parameters":[{"name":"id","in":"path","description":"ID único del usuario","required":true,"schema":{"type":"integer","format":"int64"},"example":1}],"requestBody":{"description":"Nueva contraseña","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PasswordUpdateDto"}}},"required":true},"responses":{"204":{"description":"Contraseña actualizada exitosamente"},"400":{"description":"Contraseña inválida (debe tener al menos 8 caracteres)","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}},"404":{"description":"Usuario no encontrado","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ApiError"}}}}}}},"/api/admin/orders/{id}/status":{"patch":{"tags":["Admin - Órdenes"],"summary":"Actualizar estado de una orden","description":"Permite actualizar el estado de una orden existente (PENDIENTE, CONFIRMADO, PREPARANDO, ENVIADO, ENTREGADO, CANCELADO)","operationId":"updateStatus","parameters":[{"name":"id","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"description":"Nuevo estado de la orden","content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderStatusUpdateDto"}}},"required":true},"responses":{"200":{"description":"Estado actualizado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}},"404":{"description":"Orden no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}},"400":{"description":"Transición de estado no válida","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}}}}},"/api/store/account/orders":{"get":{"tags":["Store - Mis Pedidos"],"summary":"Obtener mis pedidos","description":"Lista todos los pedidos del cliente autenticado con paginación. Opcionalmente puede filtrar por estado (PENDIENTE, CONFIRMADO, PREPARANDO, ENVIADO, ENTREGADO, CANCELADO).","operationId":"getMyOrders","parameters":[{"name":"status","in":"query","description":"Filtrar por estado del pedido","required":false,"schema":{"type":"string","enum":["PENDIENTE","CONFIRMADO","PREPARANDO","ENVIADO","ENTREGADO","CANCELADO"]}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Lista de pedidos obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}},"security":[{"bearerAuth":[]}]}},"/api/store/account/orders/{id}":{"get":{"tags":["Store - Mis Pedidos"],"summary":"Obtener detalle de mi pedido","description":"Obtiene la información completa de un pedido específico del cliente autenticado, incluyendo detalle de items comprados.","operationId":"getOrderById","parameters":[{"name":"id","in":"path","description":"ID del pedido","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Pedido encontrado exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}},"404":{"description":"Pedido no encontrado"},"403":{"description":"No tienes permiso para ver este pedido (no te pertenece)"}},"security":[{"bearerAuth":[]}]}},"/api/public/products":{"get":{"tags":["Store - Catalog"],"summary":"Listar productos activos (Catálogo)","description":"Obtiene un listado paginado de productos **ACTIVOS** para la tienda. Incluye sus variantes (tallas/colores). El filtro de búsqueda es inteligente: busca por Nombre de Producto, SKU de Variante.","operationId":"getAllProducts","parameters":[{"name":"search","in":"query","description":"Término de búsqueda para filtrar por nombre o SKU","required":false,"schema":{"type":"string"}},{"name":"categoryId","in":"query","description":"ID de categoría para filtrar productos","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"pageable","in":"query","required":true,"schema":{"$ref":"#/components/schemas/Pageable"}}],"responses":{"200":{"description":"Lista de productos obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/public/products/{id}":{"get":{"tags":["Store - Catalog"],"summary":"Obtener detalle de producto","description":"Obtiene la información completa de un producto específico, incluyendo su lista de variantes (stock por talla/color). Validación estricta: Solo retorna el producto si su estado es ACTIVE. Si está INACTIVO, retorna 404 (Not Found).","operationId":"getProductById","parameters":[{"name":"id","in":"path","description":"ID del producto padre","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Producto encontrado y disponible","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ProductDto"}}}},"404":{"description":"Producto no encontrado o no disponible (Inactivo)"}}}},"/api/public/categories":{"get":{"tags":["Store - Catalog"],"summary":"Listar categorías","description":"Obtiene todas las categorías disponibles en la tienda. Útil para construir el menú de navegación. Opcionalmente puede filtrar por categoría padre.","operationId":"getAllCategories","parameters":[{"name":"parentId","in":"query","description":"ID de la categoría padre para filtrar subcategorías","required":false,"schema":{"type":"integer","format":"int64"}},{"name":"page","in":"query","description":"Número de página (inicia en 0)","required":false,"schema":{"type":"integer","format":"int32","default":0}},{"name":"size","in":"query","description":"Tamaño de página","required":false,"schema":{"type":"integer","format":"int32","default":100}}],"responses":{"200":{"description":"Lista de categorías obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/auth/me":{"get":{"tags":["Autenticación"],"summary":"Información del usuario","description":"Obtiene la información del usuario autenticado","operationId":"me","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/AuthResponse"}}}}}}},"/api/admin/users/roles":{"get":{"tags":["Admin - Users"],"summary":"Obtener lista de roles disponibles","description":"Retorna la lista de todos los roles disponibles en el sistema que pueden ser asignados a los usuarios.","operationId":"getAllRoles","responses":{"200":{"description":"Lista de roles obtenida exitosamente","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/admin/users/roles/staff":{"get":{"tags":["Admin - Users"],"summary":"Obtener lista de roles de personal administrativo","description":"Retorna la lista de roles disponibles para el personal administrativo del sistema, excluyendo el rol CLIENTE. Este endpoint es útil para formularios de gestión de staff donde no se debe permitir asignar el rol de cliente.","operationId":"getStaffRoles","responses":{"200":{"description":"Lista de roles de staff obtenida exitosamente","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/admin/orders":{"get":{"tags":["Admin - Órdenes"],"summary":"Listar todas las órdenes con filtros","description":"Obtiene un listado paginado de órdenes con capacidad de búsqueda y filtrado combinado. Permite buscar por código de orden, nombre o apellido del cliente (búsqueda global), y filtrar específicamente por estado de la orden y tipo de entrega.","operationId":"getAllOrders","parameters":[{"name":"search","in":"query","description":"Término de búsqueda global: código de orden, nombre o apellido del cliente","required":false,"schema":{"type":"string"},"example":"ORD-2025-00001"},{"name":"status","in":"query","description":"Filtrar por estado específico de la orden","required":false,"schema":{"type":"string","enum":["PENDIENTE","CONFIRMADO","PREPARANDO","ENVIADO","ENTREGADO","CANCELADO"]},"example":"CONFIRMADO"},{"name":"deliveryType","in":"query","description":"Filtrar por tipo de entrega","required":false,"schema":{"type":"string","enum":["A_DOMICILIO","RECOJO_EN_TIENDA"]},"example":"A_DOMICILIO"},{"name":"pageable","in":"query","description":"Parámetros de paginación y ordenamiento. Por defecto: página 0, tamaño 10, ordenado por updatedAt DESC (última actualización)","required":true,"schema":{"$ref":"#/components/schemas/Pageable"},"example":"page=0&size=10&sort=code,asc"}],"responses":{"200":{"description":"Listado de órdenes obtenido exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/admin/orders/{id}":{"get":{"tags":["Admin - Órdenes"],"summary":"Obtener orden por ID","description":"Obtiene los detalles completos de una orden específica incluyendo items (con detalle de talla/color), cliente, dirección, factura y pagos.","operationId":"getOrderById_1","parameters":[{"name":"id","in":"path","description":"ID de la orden","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Orden encontrada exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}},"404":{"description":"Orden no encontrada","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderDto"}}}}}}},"/api/admin/dashboard":{"get":{"tags":["Admin - Dashboard"],"summary":"Obtener estadísticas del dashboard","description":"Retorna todas las métricas agregadas necesarias para el dashboard administrativo: contadores de órdenes/productos/clientes, ingresos totales, gráfico de ventas (últimos 14 días), y los 5 productos más vendidos. Todas las consultas se realizan mediante agregaciones en base de datos para máxima performance.","operationId":"getDashboardStats","responses":{"200":{"description":"Estadísticas obtenidas exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DashboardStatsDto"}}}},"500":{"description":"Error al calcular las estadísticas","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DashboardStatsDto"}}}}}}},"/api/admin/customers":{"get":{"tags":["Admin - Customers"],"summary":"Listar clientes con filtros y paginación","description":"Obtiene un listado paginado de clientes. Permite filtrar mediante búsqueda global (nombre, apellido, email o número de documento) y filtros específicos por tipo de documento y tipo de cliente. Los resultados se ordenan por fecha de creación descendente por defecto.","operationId":"getAllCustomers","parameters":[{"name":"search","in":"query","description":"Término de búsqueda global que filtra por nombre, apellido, email o número de documento (búsqueda parcial, insensible a mayúsculas)","required":false,"schema":{"type":"string"},"example":"Juan"},{"name":"documentType","in":"query","description":"Filtro por tipo de documento (coincidencia exacta)","required":false,"schema":{"type":"string","enum":["DNI","RUC","PASAPORTE"]},"example":"DNI"},{"name":"customerType","in":"query","description":"Filtro por tipo de cliente (coincidencia exacta)","required":false,"schema":{"type":"string","enum":["NATURAL","JURIDICA"]},"example":"NATURAL"},{"name":"pageable","in":"query","description":"Parámetros de paginación y ordenamiento. Por defecto: página 0, tamaño 20, ordenado por updatedAt DESC (última actualización)","required":true,"schema":{"$ref":"#/components/schemas/Pageable"},"example":"page=0&size=10&sort=firstName,asc"}],"responses":{"200":{"description":"Lista de clientes obtenida exitosamente","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Page"}}}}}}},"/api/store/account/addresses/{id}":{"delete":{"tags":["Store - Mi Cuenta"],"summary":"Eliminar dirección","description":"Elimina una dirección de envío del cliente. Solo se pueden eliminar direcciones propias.","operationId":"deleteAddress","parameters":[{"name":"id","in":"path","description":"ID de la dirección a eliminar","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Dirección eliminada exitosamente"},"404":{"description":"Dirección no encontrada o no pertenece al cliente"}},"security":[{"bearerAuth":[]}]}},"/api/admin/products/variants/{variantId}":{"delete":{"tags":["Admin - Catalog"],"summary":"Eliminar variante de producto","description":"Elimina físicamente una variante (talla/color) específica. Usar con precaución.","operationId":"deleteVariant","parameters":[{"name":"variantId","in":"path","description":"ID de la variante a eliminar","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"204":{"description":"Variante eliminada"},"404":{"description":"Variante no encontrada"}}}}},"components":{"schemas":{"CustomerProfileUpdateDto":{"type":"object","description":"DTO para actualizar el perfil del cliente","properties":{"firstName":{"type":"string","description":"Nombres del cliente","example":"Juan Carlos","maxLength":60,"minLength":0},"lastName":{"type":"string","description":"Apellidos del cliente","example":"Pérez García","maxLength":60,"minLength":0},"phoneNumber":{"type":"string","description":"Número de teléfono","example":987654321,"maxLength":9,"minLength":0},"documentType":{"type":"string","description":"Tipo de documento","enum":["DNI","RUC","PASAPORTE"],"example":"DNI"},"documentNumber":{"type":"string","description":"Número de documento","example":12345678,"maxLength":15,"minLength":0}},"required":["documentNumber","documentType","firstName","lastName","phoneNumber"]},"AddressDto":{"type":"object","description":"Dirección de envío","properties":{"id":{"type":"integer","format":"int64","description":"ID de la dirección","example":1},"addressType":{"type":"string","description":"Tipo de dirección","example":"DELIVERY"},"department":{"type":"string","description":"Departamento","example":"Lima"},"province":{"type":"string","description":"Provincia","example":"Lima"},"district":{"type":"string","description":"Distrito","example":"Miraflores"},"addressLine":{"type":"string","description":"Dirección completa","example":"Av. Larco 1234"},"addressReference":{"type":"string","description":"Referencia de ubicación","example":"Al frente del parque"},"addressPhone":{"type":"string","description":"Teléfono de contacto","example":987654321},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación","example":"2024-01-15T10:30:00"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización","example":"2024-01-15T10:30:00"}}},"CustomerDto":{"type":"object","description":"Información del cliente","properties":{"id":{"type":"integer","format":"int64","description":"ID del cliente","example":1},"firstName":{"type":"string","description":"Nombre del cliente","example":"Juan"},"lastName":{"type":"string","description":"Apellido del cliente","example":"Pérez"},"email":{"type":"string","description":"Correo electrónico","example":"juan.perez@email.com"},"phoneNumber":{"type":"string","description":"Número de teléfono","example":987654321},"documentType":{"type":"string","description":"Tipo de documento","example":"DNI"},"documentNumber":{"type":"string","description":"Número de documento","example":12345678},"customerType":{"type":"string","description":"Tipo de cliente","example":"NATURAL"},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación","example":"2024-01-15T10:30:00"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización","example":"2024-01-15T10:30:00"},"addresses":{"type":"array","description":"Lista de direcciones del cliente","items":{"$ref":"#/components/schemas/AddressDto"}}}},"UserUpdateDto":{"type":"object","description":"DTO para actualizar información de un usuario existente","properties":{"email":{"type":"string","format":"email","description":"Correo electrónico del usuario","example":"usuario@marbellin.com","maxLength":150,"minLength":0},"role":{"type":"string","description":"Rol del usuario","enum":["ADMIN","CLIENTE"],"example":"CLIENTE"},"enabled":{"type":"boolean","description":"Estado de activación del usuario","example":true}},"required":["email","enabled","role"]},"UserDto":{"type":"object","description":"Información del usuario del sistema","properties":{"id":{"type":"integer","format":"int64","description":"ID único del usuario","example":1},"email":{"type":"string","description":"Correo electrónico del usuario","example":"admin@marbellin.com"},"roleName":{"type":"string","description":"Nombre del rol asignado","example":"ADMIN"},"enabled":{"type":"boolean","description":"Estado de activación del usuario","example":true},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación del usuario"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización"}}},"ApiError":{"type":"object","properties":{"timestamp":{"type":"string","format":"date-time"},"status":{"type":"integer","format":"int32"},"error":{"type":"string"},"message":{"type":"string"},"path":{"type":"string"},"violations":{"type":"array","items":{"$ref":"#/components/schemas/FieldViolation"}}}},"FieldViolation":{"type":"object","properties":{"field":{"type":"string"},"reason":{"type":"string"}}},"ProductUpdateDto":{"type":"object","description":"Datos para actualizar un producto existente (todos los campos son opcionales)","properties":{"name":{"type":"string","description":"Nuevo nombre del producto","example":"Laptop HP Pavilion 14 Pro"},"description":{"type":"string","description":"Nueva descripción del producto","example":"Laptop ultradelgada mejorada..."},"price":{"type":"number","description":"Nuevo precio del producto","example":949.99},"imageUrl":{"type":"string","description":"Nueva URL de la imagen del producto","example":"https://example.com/products/hp-pavilion-v2.jpg"},"status":{"type":"string","description":"Nuevo estado del producto","enum":["ACTIVO","INACTIVO"],"example":"INACTIVO"},"categoryId":{"type":"integer","format":"int64","description":"Nuevo ID de la categoría del producto","example":2},"variants":{"type":"array","items":{"$ref":"#/components/schemas/ProductVariantUpdateDto"}}}},"ProductVariantUpdateDto":{"type":"object","description":"Datos para actualizar o crear una variante dentro de la edición de producto","properties":{"id":{"type":"integer","format":"int64","description":"ID de la variante. Si es nulo, se creará una nueva."},"sku":{"type":"string"},"size":{"type":"string"},"color":{"type":"string"},"stock":{"type":"integer","format":"int32","minimum":0}}},"CategoryDto":{"type":"object","description":"Categoría de producto","properties":{"id":{"type":"integer","format":"int64","description":"ID único de la categoría","example":1},"name":{"type":"string","description":"Nombre de la categoría","example":"Electrónica"},"parentCategoryId":{"type":"integer","format":"int64","description":"ID de la categoría padre (para jerarquías)","example":null},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación","example":"2024-01-15T10:30:00"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización","example":"2024-01-15T10:30:00"}}},"ProductDto":{"type":"object","description":"Producto del catálogo","properties":{"id":{"type":"integer","format":"int64","description":"ID único del producto","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Laptop Dell Inspiron 15"},"description":{"type":"string","description":"Descripción detallada del producto","example":"Laptop con procesador Intel Core i5..."},"price":{"type":"number","description":"Precio del producto","example":799.99},"imageUrl":{"type":"string","description":"URL de la imagen del producto","example":"https://example.com/images/laptop.jpg"},"status":{"type":"string","description":"Estado del producto","enum":["ACTIVO","INACTIVO"],"example":"ACTIVO"},"variants":{"type":"array","description":"Lista de variantes disponibles","items":{"$ref":"#/components/schemas/ProductVariantDto"}},"category":{"$ref":"#/components/schemas/CategoryDto","description":"Categoría del producto"},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación del producto","example":"2024-01-15T10:30:00"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización del producto","example":"2024-01-15T10:30:00"}}},"ProductVariantDto":{"type":"object","description":"Variante de producto (Talla/Color)","properties":{"id":{"type":"integer","format":"int64"},"sku":{"type":"string"},"size":{"type":"string"},"color":{"type":"string"},"stock":{"type":"integer","format":"int32"}}},"CustomerUpdateDto":{"type":"object","description":"DTO para actualizar información básica del cliente","properties":{"email":{"type":"string","format":"email","description":"Correo electrónico","example":"juan.perez@email.com","maxLength":150,"minLength":0},"phoneNumber":{"type":"string","description":"Número de teléfono","example":987654321,"maxLength":9,"minLength":9}}},"CategoryUpdateDto":{"type":"object","description":"Datos para actualizar una categoría existente","properties":{"name":{"type":"string","description":"Nuevo nombre de la categoría","example":"Laptops Gaming","minLength":1},"parentCategoryId":{"type":"integer","format":"int64","description":"ID de la nueva categoría padre (null para categoría raíz)","example":2}},"required":["name"]},"CartItemDto":{"type":"object","description":"Item del carrito","properties":{"productId":{"type":"integer","format":"int64","description":"ID del producto","example":1},"variantId":{"type":"integer","format":"int64","description":"ID de la variante (Talla/Color)","example":5},"quantity":{"type":"integer","format":"int32","description":"Cantidad","example":2}},"required":["productId","quantity","variantId"]},"CheckoutRequestDto":{"type":"object","description":"DTO para procesar un pedido (checkout)","properties":{"addressId":{"type":"integer","format":"int64","description":"ID de la dirección de envío (obligatorio solo para A_DOMICILIO)","example":1},"deliveryType":{"type":"string","description":"Tipo de entrega","enum":["A_DOMICILIO","RECOJO_EN_TIENDA"],"example":"A_DOMICILIO"},"paymentMethod":{"type":"string","description":"Método de pago","enum":["MERCADO_PAGO","TARJETA","YAPE","PLIN","PAGO_EFECTIVO"],"example":"YAPE"},"items":{"type":"array","description":"Items del carrito","items":{"$ref":"#/components/schemas/CartItemDto"},"minItems":1}},"required":["deliveryType","items","paymentMethod"]},"CheckoutResponseDto":{"type":"object","description":"DTO de respuesta después de procesar el checkout","properties":{"orderId":{"type":"integer","format":"int64","description":"ID de la orden creada","example":123},"orderCode":{"type":"string","description":"Código único de la orden","example":"ORD-1732819200000"},"preferenceId":{"type":"string","description":"ID de preferencia de Mercado Pago (solo para pagos online). Null cuando el método de pago es PAGO_EFECTIVO.","example":"1234567890-abcd-efgh-ijkl-123456789012"}},"required":["orderCode","orderId"]},"AddressCreateDto":{"type":"object","description":"DTO para crear o actualizar una dirección","properties":{"addressType":{"type":"string","description":"Tipo de dirección","example":"Casa","minLength":1},"department":{"type":"string","description":"Departamento","example":"Lima","maxLength":100,"minLength":0},"province":{"type":"string","description":"Provincia","example":"Lima","maxLength":100,"minLength":0},"district":{"type":"string","description":"Distrito","example":"Miraflores","maxLength":100,"minLength":0},"addressLine":{"type":"string","description":"Dirección completa","example":"Av. Larco 1234","maxLength":255,"minLength":0},"addressReference":{"type":"string","description":"Referencia de ubicación","example":"Al frente del parque","maxLength":255,"minLength":0},"addressPhone":{"type":"string","description":"Teléfono de contacto","example":987654321,"maxLength":9,"minLength":0}},"required":["addressLine","addressPhone","addressType","department","district","province"]},"Data":{"type":"object","properties":{"id":{"type":"string"}}},"WebhookNotificationDto":{"type":"object","properties":{"data":{"$ref":"#/components/schemas/Data"},"type":{"type":"string"},"action":{"type":"string"},"date_created":{"type":"string"}}},"RegisterRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","maxLength":100,"minLength":8}},"required":["email","password"]},"AuthResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"email":{"type":"string"},"rol":{"type":"string"},"authenticated":{"type":"boolean"},"token":{"type":"string"}}},"LoginRequest":{"type":"object","properties":{"email":{"type":"string","format":"email","minLength":1},"password":{"type":"string","maxLength":100,"minLength":8}},"required":["email","password"]},"UserCreateDto":{"type":"object","description":"DTO para crear un nuevo usuario en el sistema","properties":{"email":{"type":"string","format":"email","description":"Correo electrónico del usuario","example":"usuario@marbellin.com","maxLength":150,"minLength":0},"password":{"type":"string","description":"Contraseña del usuario","example":"Password123!","maxLength":2147483647,"minLength":8},"role":{"type":"string","description":"Rol del usuario","enum":["ADMIN","CLIENTE"],"example":"CLIENTE"}},"required":["email","password","role"]},"ProductCreateDto":{"type":"object","description":"Datos para crear un nuevo producto","properties":{"name":{"type":"string","description":"Nombre del producto","example":"Laptop HP Pavilion 14","minLength":1},"description":{"type":"string","description":"Descripción detallada del producto","example":"Laptop ultradelgada con pantalla de 14 pulgadas..."},"price":{"type":"number","description":"Precio del producto","example":899.99},"imageUrl":{"type":"string","description":"URL de la imagen principal del producto","example":"https://example.com/products/hp-pavilion.jpg"},"status":{"type":"string","description":"Estado del producto","enum":["ACTIVO","INACTIVO"],"example":"ACTIVO","minLength":1},"categoryId":{"type":"integer","format":"int64","description":"ID de la categoría a la que pertenece el producto","example":1},"variants":{"type":"array","items":{"$ref":"#/components/schemas/ProductVariantCreateDto"},"minItems":1}},"required":["categoryId","name","price","status","variants"]},"ProductVariantCreateDto":{"type":"object","description":"Datos para crear una variante","properties":{"sku":{"type":"string","minLength":1},"size":{"type":"string","minLength":1},"color":{"type":"string","minLength":1},"stock":{"type":"integer","format":"int32","minimum":0}},"required":["color","size","sku","stock"]},"CategoryCreateDto":{"type":"object","description":"Datos para crear una nueva categoría","properties":{"name":{"type":"string","description":"Nombre de la categoría","example":"Laptops","minLength":1},"parentCategoryId":{"type":"integer","format":"int64","description":"ID de la categoría padre (opcional, para crear subcategorías)","example":1}},"required":["name"]},"PasswordUpdateDto":{"type":"object","description":"DTO para actualizar la contraseña de un usuario","properties":{"password":{"type":"string","description":"Nueva contraseña","example":"NewPassword123!","maxLength":2147483647,"minLength":8}},"required":["password"]},"OrderStatusUpdateDto":{"type":"object","description":"DTO para actualizar el estado de una orden","properties":{"status":{"type":"string","description":"Nuevo estado de la orden","enum":["PENDIENTE","CONFIRMADO","PREPARANDO","ENVIADO","ENTREGADO","CANCELADO"],"example":"CONFIRMADO"}},"required":["status"]},"InvoiceDto":{"type":"object","description":"Información de la factura/boleta asociada a la orden","properties":{"id":{"type":"integer","format":"int64","description":"ID de la factura","example":1},"type":{"type":"string","description":"Tipo de comprobante","example":"BOLETA"},"serie":{"type":"string","description":"Serie del comprobante","example":"B001"},"number":{"type":"string","description":"Número del comprobante","example":"00001234"},"issuedAt":{"type":"string","format":"date-time","description":"Fecha de emisión"},"totalAmount":{"type":"number","description":"Monto total","example":450.0},"currency":{"type":"string","description":"Código de moneda","example":"PEN"},"status":{"type":"string","description":"Estado de la factura","example":"EMITIDO"},"documentUrl":{"type":"string","description":"URL del documento PDF/XML"}}},"OrderDto":{"type":"object","description":"Información completa de una orden","properties":{"id":{"type":"integer","format":"int64","description":"ID de la orden","example":1},"code":{"type":"string","description":"Código único de la orden","example":"ORD-2025-00001"},"status":{"type":"string","description":"Estado de la orden","example":"PENDING"},"deliveryType":{"type":"string","description":"Tipo de entrega","example":"HOME_DELIVERY"},"subtotal":{"type":"number","description":"Subtotal de la orden","example":400.0},"shippingCost":{"type":"number","description":"Costo de envío","example":30.0},"discount":{"type":"number","description":"Descuento aplicado","example":20.0},"total":{"type":"number","description":"Total de la orden","example":410.0},"createdAt":{"type":"string","format":"date-time","description":"Fecha de creación"},"updatedAt":{"type":"string","format":"date-time","description":"Fecha de última actualización"},"customer":{"$ref":"#/components/schemas/CustomerDto","description":"Información del cliente"},"address":{"$ref":"#/components/schemas/AddressDto","description":"Dirección de envío (puede ser null si es recojo en tienda)"},"items":{"type":"array","description":"Items de la orden","items":{"$ref":"#/components/schemas/OrderItemDto"}},"invoice":{"$ref":"#/components/schemas/InvoiceDto","description":"Factura asociada (puede ser null si aún no se emite)"},"payments":{"type":"array","description":"Pagos asociados a la orden","items":{"$ref":"#/components/schemas/PaymentDto"}}}},"OrderItemDto":{"type":"object","description":"Item de producto en la orden","properties":{"id":{"type":"integer","format":"int64","description":"ID del item","example":1},"productId":{"type":"integer","format":"int64","description":"ID del producto","example":10},"productName":{"type":"string","description":"Nombre del producto","example":"Bikini Azul Verano"},"variantSku":{"type":"string","description":"SKU de la variante especifica","example":"BIK-AZU-055"},"selectedSize":{"type":"string","description":"Talla seleccionada","example":"S"},"selectedColor":{"type":"string","description":"Color seleccionado","example":"Rojo"},"productImageUrl":{"type":"string","description":"URL de imagen del producto"},"quantity":{"type":"integer","format":"int32","description":"Cantidad","example":2},"unitPrice":{"type":"number","description":"Precio unitario","example":250.0},"subtotal":{"type":"number","description":"Subtotal (cantidad * precio)","example":100.0}}},"PaymentDto":{"type":"object","description":"Información del pago asociado a la orden","properties":{"id":{"type":"integer","format":"int64","description":"ID del pago","example":1},"amount":{"type":"number","description":"Monto del pago","example":450.0},"currency":{"type":"string","description":"Código de moneda","example":"PEN"},"method":{"type":"string","description":"Método de pago","example":"CREDIT_CARD"},"status":{"type":"string","description":"Estado del pago","example":"COMPLETED"},"transactionId":{"type":"string","description":"ID de transacción de la pasarela","example":"TXN-123456789"},"paidAt":{"type":"string","format":"date-time","description":"Fecha y hora del pago"}}},"Pageable":{"type":"object","properties":{"page":{"type":"integer","format":"int32","minimum":0},"size":{"type":"integer","format":"int32","minimum":1},"sort":{"type":"array","items":{"type":"string"}}}},"Page":{"type":"object","properties":{"totalPages":{"type":"integer","format":"int32"},"totalElements":{"type":"integer","format":"int64"},"size":{"type":"integer","format":"int32"},"content":{"type":"array","items":{}},"number":{"type":"integer","format":"int32"},"sort":{"$ref":"#/components/schemas/SortObject"},"numberOfElements":{"type":"integer","format":"int32"},"first":{"type":"boolean"},"last":{"type":"boolean"},"pageable":{"$ref":"#/components/schemas/PageableObject"},"empty":{"type":"boolean"}}},"PageableObject":{"type":"object","properties":{"offset":{"type":"integer","format":"int64"},"sort":{"$ref":"#/components/schemas/SortObject"},"paged":{"type":"boolean"},"pageSize":{"type":"integer","format":"int32"},"pageNumber":{"type":"integer","format":"int32"},"unpaged":{"type":"boolean"}}},"SortObject":{"type":"object","properties":{"empty":{"type":"boolean"},"sorted":{"type":"boolean"},"unsorted":{"type":"boolean"}}},"ChartDataPointDto":{"type":"object","description":"Punto de datos para el gráfico de ventas","properties":{"label":{"type":"string","description":"Etiqueta (fecha)","example":"21/11"},"value":{"type":"number","description":"Valor de ventas","example":1250.5}}},"DashboardStatsDto":{"type":"object","description":"Estadísticas agregadas del dashboard administrativo","properties":{"totalOrders":{"type":"integer","format":"int64","description":"Total de órdenes en el sistema","example":1250},"pendingOrders":{"type":"integer","format":"int64","description":"Órdenes pendientes de confirmación","example":45},"completedOrders":{"type":"integer","format":"int64","description":"Órdenes completadas (entregadas)","example":980},"totalRevenue":{"type":"number","description":"Ingresos totales de órdenes entregadas","example":125430.5},"totalProducts":{"type":"integer","format":"int64","description":"Total de productos en catálogo","example":350},"totalCustomers":{"type":"integer","format":"int64","description":"Total de clientes registrados","example":520},"salesChartData":{"type":"array","description":"Datos para el gráfico de ventas (últimos 14 días)","items":{"$ref":"#/components/schemas/ChartDataPointDto"}},"topProducts":{"type":"array","description":"Top 5 productos más vendidos","items":{"$ref":"#/components/schemas/TopProductDto"}},"latestOrders":{"type":"array","description":"Últimas 5 órdenes creadas en el sistema","items":{"$ref":"#/components/schemas/OrderDto"}}}},"TopProductDto":{"type":"object","description":"Información de un producto más vendido","properties":{"id":{"type":"integer","format":"int64","description":"ID del producto","example":1},"name":{"type":"string","description":"Nombre del producto","example":"Mouse Logitech G502"},"qtySold":{"type":"integer","format":"int64","description":"Cantidad total vendida","example":125},"revenue":{"type":"number","description":"Ingresos generados","example":15625.0}}}}}}